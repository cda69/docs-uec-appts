---
title: Deployment Toolkit - Path to Live
sidebar: deployment_sidebar
keywords: guidance
permalink: dep_devptl.html
toc: false
folder: deployment
---

{% include note-notpublished.html %}

<div class="mxgraph" style="max-width:100%;" data-mxgraph="{&quot;highlight&quot;:&quot;#0000ff&quot;,&quot;lightbox&quot;:false,&quot;nav&quot;:true,&quot;edit&quot;:&quot;_blank&quot;,&quot;xml&quot;:&quot;&lt;mxfile host=\&quot;Electron\&quot; modified=\&quot;2020-06-25T15:33:10.520Z\&quot; agent=\&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/13.2.2 Chrome/83.0.4103.100 Electron/9.0.3 Safari/537.36\&quot; etag=\&quot;a-BxV3ALqy6t-Z-rnjd5\&quot; version=\&quot;13.2.2\&quot; type=\&quot;device\&quot;&gt;&lt;diagram name=\&quot;Page-1\&quot; id=\&quot;12e1b939-464a-85fe-373e-61e167be1490\&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;&quot;}"></div>
<script type="text/javascript" src="https://app.diagrams.net/js/viewer.min.js"></script>

## Development

### Research

During this stage, suppliers will conduct any initial engagement, research etc.. required to get development underway. The UEC Booking demonstrator is a useful tool for this stage (see <a href="http://appointments.directoryofservices.nhs.uk:443/poc/index" target="_blank">here</a>).

### Development Complete

Once Development is complete, the sullplier can move onto Integration Testing.


## Integration Testing

Integration testing can be a challenging step. It involves gaining access to the SPINE Integration Environment (INT).
There are a series of prerequestites and steps to complete before you can begin integration testing.

### Pre-Requisites
 
Below are the prerequisites that need to be established before it is possible to connect to the INT environment:
 * You must have HSCN connectivity 
 * You must have started the on-boarding (SCAL) process with the NHS Digital Solutions Assurance team

### Getting connected
Once you have the above pre-requisites you will need to <a href="https://digital.nhs.uk/services/path-to-live-environments/connect-to-a-path-to-live-environment" target="_blank">get connected to the INT environment</a>. This requires a series of steps:

1. Register or modify your FQDN with the NHS' DNS service 
 * You will find the <a href="https://digital.nhs.uk/forms/dns-request-form-for-path-to-live-environments" target="_blank">DNS request form here</a>.
 * You need to know what your URL is  
2. Register or modify your messaging product with Spine 
 * Use the <a href="https://digital.nhs.uk/forms/manufacturer-product-version-registration-request" target="_blank£">MPV registration request form</a> for this
3 Request new certificates and/or create or modify endpoints 
 * Use the <a href="https://digital.nhs.uk/forms/combined-endpoint-and-service-registration-request" target="_blank">Combined endpoint and service registration request form</a> for this
 
### Configure your environment to connect to SSP: 

    Install the cert you have been given to local cert store and bind you your site e.g. – xxx.thirdparty.nhs.uk etc 

    Configure your firewall to make outbound connections to: https://proxy.int.spine2.ncrs.nhs.uk/[provider service root url]/[fhir request] 

     (see https://digital.nhs.uk/services/path-to-live-environments/integration-environment#messaging-urls) for more information 

    Configure your firewall to receive connection inbound from msg-out.int.spine2.ncrs.nhs.uk  

    (See here for more information: https://digital.nhs.uk/services/path-to-live-environments/integration-environment#outbound-network-address-translation-nat-addresses 

    Root CA and Sub ca installed in cert store and added to bindings for local site in SSL/TLS  - as described here: https://digital.nhs.uk/services/path-to-live-environments/integration-environment#rootca-and-subca-certificates 

    Note, contrary to the information in that link, PLEASE ENSURE YOU PUT BOTH CERTIFICATES IN (SHA1 + SHA2)!! 

    (See documentation for more information: https://digital.nhs.uk/services/path-to-live-environments/integration-environment) 

    Configure and check Certificate revocation (CRL checks) for both old (SHA1) and new (SHA2) root certs. 

    They use different revocation methods 

    New (SHA2) needs the following: 

     http://crl.nhs.uk/int/1c/crlc2.crl - for SHA2.  The Subca/Rootca will point to this URL.  This URL will download a CRL file locally and will add CRL checks in.  Local TLS should be configured to go check this file.  It is on the INTERNET – ie configure firewall outbound to be able to go to this URL over the internet. 

    Old (SHA1) needs the following: 

    The CDP is a relative request to an LDAP query!  This is not live and not accessible. 

    So the process required is to download the file and load it locally into the CRL cache and then configure the service to not check for a new file! 

    The CRL files can be downloaded from here:  http://checkit/public/pki/crls.php.  This is on HSCN. This file is updated every day.  However it is large, and so it is acceptable to have a batch process which updates it on a longer schedule.  I recommend once per week.  For your clients you will obviously need this to be a batch process to download and install. 

    Note – you need to find the correct CRL file for the right SSP integration or live environment 

    In IIS there is a way of setting IIS CRL use to default to the cached file and use that even if the file downloaded CRL expiry date is in the past. " If CertCheckMode is set to 2 Certificate revocation verification will be done based on the cached CRL on the IIS server. IIS will not try to connect to the remote server to download the CRL even if it has expired and in which case CRL verification will obviously fail." I think that means from in here: https://docs.microsoft.com/en-gb/windows/win32/api/http/ns-http-http_service_config_ssl_param?redirectedfrom=MSDN, the DefaultCertCheckMode is set to 2.   

 

 
### End-to-End test

## Assure

### Technical Conformance Certificate

## Provider Testing

### End-User Organisation Connection Policy (EUOCP)

## Technical Live

### Business Live
